import{r as n,j as e}from"./index-iG59JKom.js";import{u as b,T as C,c as y,a as w}from"./index.esm-23GHL4SO.js";import{a as i}from"./api-D2tvMSLR.js";import{C as E,B as x,r as D,t as r,P as S}from"./Modal-Dum-JuP6.js";import{T as k,a as v,b as A,c as u,d as o,e as B}from"./TableRow-8qydiO_t.js";import{D as N,a as F,b as W,c as q}from"./DialogTitle-BYpLci-m.js";import"./Select-H03bxxAv.js";import"./Menu-Bb-jsYuj.js";const z=y({name:w().required("Name is required")}),G=()=>{const[g,j]=n.useState([]),[p,l]=n.useState(!1),[t,h]=n.useState(null);n.useEffect(()=>{c()},[]);const c=async()=>{try{const a=await i.tags.getAll();j(a)}catch(a){console.error("Error fetching tags:",a)}},d=()=>{l(!1),h(null),s.resetForm()},s=b({initialValues:{name:""},validationSchema:z,onSubmit:async a=>{try{t?await i.tags.update(t.id,a):await i.tags.create(a),d(),c()}catch(m){console.error("Error saving tag:",m)}}}),f=a=>{h(a),s.setValues({name:a.name}),l(!0)},T=async a=>{if(window.confirm("Are you sure you want to delete this tag?"))try{await i.tags.delete(a),c()}catch(m){console.error("Error deleting tag:",m)}};return e.jsx(E,{children:e.jsxs(x,{sx:{mt:4,mb:4},children:[e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[e.jsx(D,{variant:"h4",component:"h1",children:"Tag Management"}),e.jsx(r,{variant:"contained",onClick:()=>l(!0),children:"Add New Tag"})]}),e.jsx(k,{component:S,children:e.jsxs(v,{children:[e.jsx(A,{children:e.jsxs(u,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Actions"})]})}),e.jsx(B,{children:g.map(a=>e.jsxs(u,{children:[e.jsx(o,{children:a.name}),e.jsxs(o,{children:[e.jsx(r,{size:"small",onClick:()=>f(a),sx:{mr:1},children:"Edit"}),e.jsx(r,{size:"small",color:"error",onClick:()=>T(a.id),children:"Delete"})]})]},a.id))})]})}),e.jsxs(N,{open:p,onClose:d,maxWidth:"sm",fullWidth:!0,children:[e.jsx(F,{children:t?"Edit Tag":"Add New Tag"}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsx(W,{children:e.jsx(C,{fullWidth:!0,margin:"normal",name:"name",label:"Tag Name",value:s.values.name,onChange:s.handleChange,error:s.touched.name&&!!s.errors.name,helperText:s.touched.name&&s.errors.name})}),e.jsxs(q,{children:[e.jsx(r,{onClick:d,children:"Cancel"}),e.jsx(r,{type:"submit",variant:"contained",children:t?"Update":"Create"})]})]})]})]})})};export{G as default};
