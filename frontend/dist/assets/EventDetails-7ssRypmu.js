import{v as k,h as B,r as n,f as b,j as e}from"./index-iG59JKom.js";import{a as m}from"./api-D2tvMSLR.js";import{B as a,r as s,C,t as g}from"./Modal-Dum-JuP6.js";import{G as l,a as S,b as D,C as w}from"./Grid-5WYxMnie.js";import{D as A,a as F,b as L,c as W}from"./DialogTitle-BYpLci-m.js";const I=()=>{var x;const{id:i}=k(),d=B(),[t,j]=n.useState(null),[f,p]=n.useState(!0),[h,o]=n.useState(null),[v,u]=n.useState(!1),{isAuthenticated:y}=b(r=>r.auth);n.useEffect(()=>{(async()=>{try{const c=await m.events.getById(i);j(c),o(null)}catch(c){console.error("Error fetching event:",c),o("Failed to load event details")}finally{p(!1)}})()},[i]);const E=async()=>{if(!y){d("/login");return}try{await m.bookings.create(i),u(!0),o(null)}catch(r){console.error("Error booking event:",r),o(r instanceof Error?r.message:"Failed to book event")}};return f?e.jsx(a,{sx:{textAlign:"center",py:4},children:e.jsx(s,{children:"Loading event details..."})}):h?e.jsx(a,{sx:{textAlign:"center",py:4},children:e.jsx(s,{color:"error",children:h})}):t?e.jsxs(C,{maxWidth:"lg",children:[e.jsxs(l,{container:!0,spacing:4,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(S,{children:e.jsx(D,{component:"img",height:"400",image:t.image,alt:t.name,sx:{objectFit:"cover"}})})}),e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(s,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name}),e.jsxs(s,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:[new Date(t.date).toLocaleDateString()," at ",t.location]}),e.jsx(a,{sx:{my:2},children:(x=t.tags)==null?void 0:x.map(r=>e.jsx(w,{label:r.name,sx:{mr:1,mb:1},variant:"outlined"},r.id))}),e.jsx(s,{variant:"body1",paragraph:!0,children:t.description}),e.jsxs(s,{variant:"h6",gutterBottom:!0,children:["Price: $",t.price]}),e.jsx(g,{variant:"contained",size:"large",fullWidth:!0,onClick:E,sx:{mt:2},children:"Book Now"})]})]}),e.jsxs(A,{open:v,onClose:()=>u(!1),children:[e.jsx(F,{children:"Booking Successful!"}),e.jsx(L,{children:e.jsxs(s,{children:["You have successfully booked a ticket for ",t.name,". We look forward to seeing you at the event!"]})}),e.jsx(W,{children:e.jsx(g,{onClick:()=>d("/"),color:"primary",children:"Back to Events"})})]})]}):e.jsx(a,{sx:{textAlign:"center",py:4},children:e.jsx(s,{children:"Event not found"})})};export{I as default};
