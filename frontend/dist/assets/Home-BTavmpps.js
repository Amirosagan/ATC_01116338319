import{r as c,k as $,j as e,m as w,n as P,o as z,p as q,q as H,s as Y,t as A,b as O,h as J}from"./index-DSqpeUuh.js";import{a as K}from"./api-Dj5MVBib.js";import{v as Q,c as U,w as X,d as W,a as G,b as Z,s as I,B as y,x as _,r as S,C as N,t as ee}from"./Modal-BYNEZc4r.js";import{A as se}from"./Alert-gccA8IL_.js";import{F as D,I as F,S as R,O as te}from"./Select-Bl1ZimVr.js";import{M as V}from"./MenuItem-DvMERAY1.js";import{C as b,G as L,a as ne,b as ae}from"./Grid-DGvkimel.js";import"./IconButton-Dd534vho.js";import"./Menu-CTMPHzOI.js";const re=Y(),oe=Q("div",{name:"MuiStack",slot:"Root"});function ie(s){return X({props:s,name:"MuiStack",defaultTheme:re})}function le(s,r){const l=c.Children.toArray(s).filter(Boolean);return l.reduce((o,u,i)=>(o.push(u),i<l.length-1&&o.push(c.cloneElement(r,{key:`separator-${i}`})),o),[])}const ce=s=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[s],de=({ownerState:s,theme:r})=>{let l={display:"flex",flexDirection:"column",...w({theme:r},P({values:s.direction,breakpoints:r.breakpoints.values}),o=>({flexDirection:o}))};if(s.spacing){const o=z(r),u=Object.keys(r.breakpoints.values).reduce((a,d)=>((typeof s.spacing=="object"&&s.spacing[d]!=null||typeof s.direction=="object"&&s.direction[d]!=null)&&(a[d]=!0),a),{}),i=P({values:s.direction,base:u}),g=P({values:s.spacing,base:u});typeof i=="object"&&Object.keys(i).forEach((a,d,x)=>{if(!i[a]){const h=d>0?i[x[d-1]]:"column";i[a]=h}}),l=q(l,w({theme:r},g,(a,d)=>s.useFlexGap?{gap:A(o,a)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${ce(d?i[d]:s.direction)}`]:A(o,a)}}))}return l=H(r.breakpoints,l),l};function ue(s={}){const{createStyledComponent:r=oe,useThemeProps:l=ie,componentName:o="MuiStack"}=s,u=()=>W({root:["root"]},a=>G(o,a),{}),i=r(de);return c.forwardRef(function(a,d){const x=l(a),C=$(x),{component:h="div",direction:k="column",spacing:T=0,divider:j,children:v,className:E,useFlexGap:M=!1,...t}=C,n={direction:k,spacing:T,useFlexGap:M},m=u();return e.jsx(i,{as:h,ownerState:n,ref:d,className:U(m.root,E),...t,children:j?le(v,j):v})})}function me(s){return G("MuiCardContent",s)}Z("MuiCardContent",["root"]);const pe=s=>{const{classes:r}=s;return W({root:["root"]},me,r)},xe=I("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),fe=c.forwardRef(function(r,l){const o=O({props:r,name:"MuiCardContent"}),{className:u,component:i="div",...g}=o,p={...o,component:i},a=pe(p);return e.jsx(xe,{as:i,className:U(a.root,u),ownerState:p,ref:l,...g})}),ge=ue({createStyledComponent:I("div",{name:"MuiStack",slot:"Root"}),useThemeProps:s=>O({props:s,name:"MuiStack"})}),he=({message:s="Loading..."})=>e.jsxs(y,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",gap:2},children:[e.jsx(_,{}),e.jsx(S,{variant:"body1",color:"text.secondary",children:s})]}),ye=({message:s})=>e.jsx(N,{children:e.jsx(se,{severity:"error",sx:{mt:4},children:s})}),Be=()=>{const[s,r]=c.useState([]),[l,o]=c.useState([]),[u,i]=c.useState(!0),[g,p]=c.useState(null),[a,d]=c.useState(""),[x,C]=c.useState([]),[h,k]=c.useState([]),[T,j]=c.useState([]),v=J();c.useEffect(()=>{(async()=>{try{const n=await K.events.getAll();r(n),o(n);const m=Array.from(new Set(n.map(f=>f.category)));k(m);const B=Array.from(new Set(n.flatMap(f=>f.tags||[]).map(f=>f.name)));j(B.map(f=>({id:f,name:f}))),p(null)}catch(n){p(n instanceof Error?n.message:"Failed to fetch events")}finally{i(!1)}})()},[]),c.useEffect(()=>{let t=[...s];a&&(t=t.filter(n=>n.category===a)),x.length>0&&(t=t.filter(n=>{var m;return(m=n.tags)==null?void 0:m.some(B=>x.includes(B.name))})),o(t)},[s,a,x]);const E=t=>{d(t.target.value)},M=t=>{const n=t.target.value;C(typeof n=="string"?n.split(","):n)};return u?e.jsx(he,{message:"Loading events..."}):g?e.jsx(ye,{message:g}):e.jsxs(N,{children:[e.jsx(S,{variant:"h4",component:"h1",gutterBottom:!0,children:"Upcoming Events"}),e.jsx(y,{sx:{mb:4},children:e.jsxs(ge,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsxs(D,{sx:{minWidth:200},children:[e.jsx(F,{children:"Category"}),e.jsxs(R,{value:a,onChange:E,label:"Category",children:[e.jsx(V,{value:"",children:e.jsx("em",{children:"All Categories"})}),h.map(t=>e.jsx(V,{value:t,children:t},t))]})]}),e.jsxs(D,{sx:{minWidth:200},children:[e.jsx(F,{children:"Tags"}),e.jsx(R,{multiple:!0,value:x,onChange:M,input:e.jsx(te,{label:"Tags"}),renderValue:t=>e.jsx(y,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:t.map(n=>e.jsx(b,{label:n,size:"small"},n))}),children:T.map(t=>e.jsx(V,{value:t.name,children:t.name},t.id))})]})]})}),e.jsx(L,{container:!0,spacing:4,children:l.map(t=>{var n;return e.jsx(L,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(ne,{sx:{height:"100%",display:"flex",flexDirection:"column","&:hover":{transform:"translateY(-4px)",transition:"transform 0.2s ease-in-out"}},children:[e.jsx(ae,{component:"img",height:"200",image:t.image,alt:t.name}),e.jsxs(fe,{sx:{flexGrow:1},children:[e.jsx(S,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),e.jsx(S,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.description}),e.jsxs(y,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:1},children:[e.jsx(b,{label:t.category,size:"small",color:"primary"}),e.jsx(b,{label:`$${t.price}`,size:"small",color:"secondary"}),(n=t.tags)==null?void 0:n.map(m=>e.jsx(b,{label:m.name,size:"small",variant:"outlined"},m.id))]}),e.jsx(y,{sx:{mt:2},children:e.jsx(ee,{variant:"contained",fullWidth:!0,onClick:()=>v(`/events/${t.id}`),children:"View Details"})})]})]})},t.id)})})]})};export{Be as default};
